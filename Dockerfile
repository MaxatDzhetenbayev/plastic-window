# Используем базовый образ
FROM node:20-alpine

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем файлы зависимостей
COPY package*.json ./

# Устанавливаем зависимости и проверяем на ошибки
RUN npm i
# Копируем остальной код приложения
COPY . .

# Собираем проект и проверяем на ошибки
RUN npm run build
# Экспонируем порт, который будет использоваться приложением
EXPOSE 4173

# Запускаем приложение
CMD ["npm", "run", "preview", "--host"]
